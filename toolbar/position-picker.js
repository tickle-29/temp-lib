"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PositionPicker=void 0;const react_1=__importDefault(require("react")),mobx_react_lite_1=require("mobx-react-lite"),core_1=require("@blueprintjs/core"),popover2_1=require("@blueprintjs/popover2"),math_1=require("../utils/math"),l10n_1=require("../utils/l10n");exports.PositionPicker=(0,mobx_react_lite_1.observer)((({store:e})=>{var t,l,o,n;const a=e.selectedElements.length>0,i=e.selectedElementsIds,c=e.selectedElements.every((e=>e.draggable)),r=!e.selectedElements.some((e=>"group"===e.type))&&c;return react_1.default.createElement(popover2_1.Popover2,{disabled:!a,content:react_1.default.createElement(core_1.Menu,null,react_1.default.createElement(core_1.MenuDivider,{title:(0,l10n_1.t)("toolbar.layering")}),react_1.default.createElement(core_1.MenuItem,{shouldDismissPopover:!1,icon:"double-chevron-up",text:(0,l10n_1.t)("toolbar.toForward"),disabled:!(null===(t=e.activePage)||void 0===t?void 0:t.canMoveElementsTop(i)),onClick:()=>{var t;null===(t=e.activePage)||void 0===t||t.moveElementsTop(i)}}),react_1.default.createElement(core_1.MenuItem,{shouldDismissPopover:!1,icon:"chevron-up",text:(0,l10n_1.t)("toolbar.up"),disabled:!(null===(l=e.activePage)||void 0===l?void 0:l.canMoveElementsUp(i)),onClick:()=>{var t;null===(t=e.activePage)||void 0===t||t.moveElementsUp(i)}}),react_1.default.createElement(core_1.MenuItem,{shouldDismissPopover:!1,icon:"chevron-down",text:(0,l10n_1.t)("toolbar.down"),disabled:!(null===(o=e.activePage)||void 0===o?void 0:o.canMoveElementsDown(i)),onClick:()=>{var t;null===(t=e.activePage)||void 0===t||t.moveElementsDown(i)}}),react_1.default.createElement(core_1.MenuItem,{shouldDismissPopover:!1,icon:"double-chevron-down",text:(0,l10n_1.t)("toolbar.toBottom"),disabled:!(null===(n=e.activePage)||void 0===n?void 0:n.canMoveElementsBottom(i)),onClick:()=>{var t;null===(t=e.activePage)||void 0===t||t.moveElementsBottom(i)}}),r&&react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(core_1.MenuDivider,{title:(0,l10n_1.t)("toolbar.position")}),react_1.default.createElement(core_1.MenuItem,{shouldDismissPopover:!1,icon:"alignment-left",text:(0,l10n_1.t)("toolbar.alignLeft"),onClick:()=>{var t;let l=null===(t=e.activePage)||void 0===t?void 0:t.computedWidth;e.selectedElements.forEach((e=>{l=Math.min(l,(0,math_1.getClientRect)(e).x)})),1===e.selectedElements.length&&(l=0),e.selectedElements.forEach((e=>{const t=(0,math_1.getClientRect)(e);e.set({x:e.x-t.x+l})}))}}),react_1.default.createElement(core_1.MenuItem,{shouldDismissPopover:!1,icon:"alignment-vertical-center",text:(0,l10n_1.t)("toolbar.alignCenter"),onClick:()=>{var t,l;let o=null===(t=e.activePage)||void 0===t?void 0:t.computedWidth,n=0;e.selectedElements.forEach((e=>{const t=(0,math_1.getClientRect)(e);o=Math.min(o,t.x),n=Math.max(n,t.x+t.width)}));let a=(n+o)/2;1===e.selectedElements.length&&(a=(null===(l=e.activePage)||void 0===l?void 0:l.computedWidth)/2),e.selectedElements.forEach((e=>{const t=(0,math_1.getClientRect)(e),l=e.x-t.x;e.set({x:a-l-t.width/2})}))}}),react_1.default.createElement(core_1.MenuItem,{shouldDismissPopover:!1,icon:"alignment-right",text:(0,l10n_1.t)("toolbar.alignRight"),onClick:()=>{var t;let l=0;e.selectedElements.forEach((e=>{const t=(0,math_1.getClientRect)(e);l=Math.max(l,t.x+t.width)})),1===e.selectedElements.length&&(l=null===(t=e.activePage)||void 0===t?void 0:t.computedWidth),e.selectedElements.forEach((e=>{const t=(0,math_1.getClientRect)(e);e.set({x:e.x-t.x+l-t.width})}))}}),react_1.default.createElement(core_1.MenuItem,{shouldDismissPopover:!1,icon:"alignment-top",text:(0,l10n_1.t)("toolbar.alignTop"),onClick:()=>{var t;let l=null===(t=e.activePage)||void 0===t?void 0:t.computedHeight;e.selectedElements.forEach((e=>{l=Math.min(l,(0,math_1.getClientRect)(e).y)})),e.selectedElements.forEach((e=>{e.set({y:e.y-l})}))}}),react_1.default.createElement(core_1.MenuItem,{shouldDismissPopover:!1,icon:"alignment-horizontal-center",text:(0,l10n_1.t)("toolbar.alignMiddle"),onClick:()=>{var t,l;let o=null===(t=e.activePage)||void 0===t?void 0:t.computedHeight,n=0;e.selectedElements.forEach((e=>{const t=(0,math_1.getClientRect)(e);o=Math.min(o,t.y),n=Math.max(n,t.y+t.height)}));let a=(n+o)/2;1===e.selectedElements.length&&(a=(null===(l=e.activePage)||void 0===l?void 0:l.computedHeight)/2),e.selectedElements.forEach((e=>{const t=(0,math_1.getClientRect)(e),l=e.y-t.y;e.set({y:a-l-t.height/2})}))}}),react_1.default.createElement(core_1.MenuItem,{shouldDismissPopover:!1,icon:"alignment-bottom",text:(0,l10n_1.t)("toolbar.alignBottom"),onClick:()=>{var t;let l=0;e.selectedElements.forEach((e=>{const t=(0,math_1.getClientRect)(e);l=Math.max(l,t.y+t.height)})),1===e.selectedElements.length&&(l=null===(t=e.activePage)||void 0===t?void 0:t.computedHeight),e.selectedElements.forEach((e=>{const t=(0,math_1.getClientRect)(e);e.set({y:e.y-t.y+l-t.height})}))}}))),position:core_1.Position.BOTTOM},react_1.default.createElement(core_1.Button,{icon:"layers",minimal:!0,text:(0,l10n_1.t)("toolbar.position"),disabled:!a}))}));