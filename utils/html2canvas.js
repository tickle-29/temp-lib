"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.htmlToCanvas=exports.detectSize=void 0;const rasterizeHTML=__importStar(require("rasterizehtml")),pixelRatio=2,resetStyle="\n<style>\n  html, body {\n    padding: 0;\n    margin: 0;\n  }\n  p {\n    margin: 0;\n    padding: 0\n  }\n  ul {\n    list-style-position: inside;\n    margin: 0;\n  }\n</style>\n",hidden=document.createElement("div");function detectSize(e){const t=document.createElement("div");t.innerHTML=e,t.style.display="inline-block",t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.zIndex="1000",hidden.appendChild(t);const n=t.getBoundingClientRect();return hidden.removeChild(t),{width:n.width,height:n.height}}async function htmlToCanvas({html:e,width:t,height:n,fontFamily:i,padding:o,font:d}){const l=document.createElement("canvas");"Arial"===i||d||(e+=`<link type="text/css" href="https://fonts.googleapis.com/css?family=${i}" rel="stylesheet">`),d&&(e+=`<style>@font-face {font-family: '${d.fontFamily}'; src: url("${d.url}")}</style>`),e+=resetStyle;const r=await rasterizeHTML.drawHTML(`<div style="padding: ${o}px;">${e}</div>`,l,{width:t+2*o,height:n+2*o});l.width=2*(t+2*o),l.height=2*(n+2*o);const a=l.getContext("2d");return null==a||a.drawImage(r.image,0,0,2*r.image.width,2*r.image.height),l}hidden.id="polotno-hidden-do-not-touch",hidden.style.overflow="hidden",hidden.style.position="relative",document.body.appendChild(hidden),hidden.innerHTML="<style>\n#polotno-hidden-do-not-touch p {\n  margin: 0;\n  padding: 0\n}\n#polotno-hidden-do-not-touch ul {\n  list-style-position: inside;\n  margin: 0;\n}\n</style>",exports.detectSize=detectSize,exports.htmlToCanvas=htmlToCanvas;